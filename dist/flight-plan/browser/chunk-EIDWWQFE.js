import{a as W}from"./chunk-T2WTCJ4O.js";import{a as G,b as X}from"./chunk-5SA2S6GR.js";import{a as q,b as L,c as U,d as B}from"./chunk-M3HRVRGE.js";import{a as Y}from"./chunk-5O3KCUDD.js";import{a as J}from"./chunk-7T65EUDQ.js";import"./chunk-R26FGQ4L.js";import"./chunk-POBAOHGX.js";import"./chunk-YY6PKKWH.js";import{d as S,f as I,g as j,h as D}from"./chunk-F6E2PCO4.js";import{a as V,b as H}from"./chunk-2ZYGBJ4M.js";import{_ as b}from"./chunk-6QB5CJHO.js";import"./chunk-F2X3VGZZ.js";import{g as M,h as O}from"./chunk-X4I2DCXD.js";import{G as N,H as m,J as A,K as E,L as F,M as c,O as T,Q as k,R,_ as z,h as P,t as w}from"./chunk-W6HB4DVC.js";import{Bb as _,Cb as v,Ha as h,Ka as s,Ob as n,Pa as u,Vb as y,Wa as C,ab as p,ib as x,nb as d,rb as e,sb as t,tb as l}from"./chunk-LWB6VDSI.js";function Q(i,o){i&1&&(e(0,"p-message",9),n(1,"First name is required."),t())}function Z(i,o){i&1&&(e(0,"p-message",9),n(1,"Surname is required."),t())}function $(i,o){i&1&&(e(0,"p-message",9),n(1,"Identity number is required."),t())}function ee(i,o){i&1&&(e(0,"p-message",9),n(1,"ID must be 13 digits."),t())}function te(i,o){i&1&&(e(0,"p-message",9),n(1,"ID number is not valid."),t())}function ie(i,o){if(i&1&&p(0,$,2,0,"p-message",9)(1,ee,2,0,"p-message",9)(2,te,2,0,"p-message",9),i&2){let a,r,g,f=v();d(!((a=f.registrationForm.get("identityNumber"))==null||a.errors==null)&&a.errors.required?0:-1),s(),d(!((r=f.registrationForm.get("identityNumber"))==null||r.errors==null)&&r.errors.invalidIdFormat?1:-1),s(),d(!((g=f.registrationForm.get("identityNumber"))==null||g.errors==null)&&g.errors.invalidIdChecksum?2:-1)}}function ne(i,o){i&1&&(e(0,"p-message",9),n(1,"Mobile number is required."),t())}function oe(i,o){i&1&&(e(0,"p-message",9),n(1,"Email is required."),t())}function re(i,o){i&1&&(e(0,"p-message",9),n(1,"Please enter a valid email."),t())}function ae(i,o){if(i&1&&p(0,oe,2,0,"p-message",9)(1,re,2,0,"p-message",9),i&2){let a,r,g=v();d(!((a=g.registrationForm.get("emailAddress"))==null||a.errors==null)&&a.errors.required?0:-1),s(),d(!((r=g.registrationForm.get("emailAddress"))==null||r.errors==null)&&r.errors.email?1:-1)}}function se(i,o){i&1&&(e(0,"p-message",9),n(1,"Address is required."),t())}function le(i,o){i&1&&(e(0,"p-message",9),n(1,"Province is required."),t())}function de(i,o){i&1&&(e(0,"p-message",9),n(1,"Postal code is required."),t())}function me(i,o){i&1&&(e(0,"p-message",9),n(1,"Password is required (min 6 chars)."),t())}function pe(i,o){i&1&&(e(0,"p-message",9),n(1,"Please confirm your password."),t())}function ce(i,o){i&1&&(e(0,"p-message",9),n(1,"Passwords do not match."),t())}var ge=i=>{let o=i.get("password")?.value,a=i.get("verifyPassword")?.value;return o===a?null:{passwordMismatch:!0}},K=class i{constructor(o,a,r,g,f,fe,ue){this.provinceService=o;this.financialAdvisorService=a;this.userCredentialService=r;this.router=g;this.messageService=f;this.location=fe;this.dataCleanerHelper=ue;this.registrationForm=new F({firstName:new c("",m.required),surname:new c("",m.required),identityNumber:new c("",[m.required,this.dataCleanerHelper.southAfricanIdValidator]),mobileNumber:new c("",m.required),emailAddress:new c("",[m.required,m.email]),physicalAddress1:new c("",m.required),physicalAddress2:new c(""),provinceID:new c(0,m.required),postalCode:new c("",m.required),fscA_Number:new c(""),password:new c("",[m.required,m.minLength(6)]),verifyPassword:new c("",[m.required,m.minLength(6)])},{validators:ge})}imagePath="assets/images/Logo_Company.png";backgroundImagePath="assets/images/whiteVector.png";provinces=[];registrationForm;ngOnInit(){this.provinceService.getAll().subscribe(o=>{this.provinces=this.dataCleanerHelper.stripReferenceProps(o)})}isPasswordMismatch(){return!!(this.registrationForm.errors?.passwordMismatch&&(this.registrationForm.get("verifyPassword")?.dirty||this.registrationForm.get("verifyPassword")?.touched))}isInvalid(o){let a=this.registrationForm.get(o);return!!(a&&a.invalid&&(a.dirty||a.touched))}onSubmit(){if(this.registrationForm.invalid)return;let o={id:0,firstName:this.registrationForm.value.firstName,surname:this.registrationForm.value.surname,identityNumber:this.registrationForm.value.identityNumber,mobileNumber:this.registrationForm.value.mobileNumber,emailAddress:this.registrationForm.value.emailAddress,physicalAddress1:this.registrationForm.value.physicalAddress1,physicalAddress2:this.registrationForm.value.physicalAddress2,provinceID:this.registrationForm.value.provinceID,postalCode:this.registrationForm.value.postalCode,fsca_Number:this.registrationForm.value.fscA_Number};this.financialAdvisorService.create(o).subscribe({next:a=>{let g={id:0,userType:"Advisor",userID:this.dataCleanerHelper.stripReferenceProps(a).id,username:this.registrationForm.value.emailAddress,passwordHash:this.registrationForm.value.password,isActive:!0,lastLogin:new Date().toISOString()};this.userCredentialService.create(g).subscribe({next:f=>{this.messageService.add({severity:"success",summary:"Registration Successful",detail:"You can now log in."}),this.registrationForm.reset(),this.location.back()},error:f=>{this.messageService.add({severity:"error",summary:"User Credential Setup Failed",detail:f.message??"Registration failed, please try again."}),console.error("User credential creation failed:",f)}})},error:a=>{this.messageService.add({severity:"error",summary:"Advisor Registration Failed",detail:a.message??"Registration failed, please try again."}),console.error("Advisor registration failed:",a)}})}static \u0275fac=function(a){return new(a||i)(u(X),u(W),u(Y),u(M),u(b),u(P),u(J))};static \u0275cmp=C({type:i,selectors:[["app-registrationform"]],features:[y([b])],decls:113,vars:19,consts:[[1,"grid-container"],[1,"vector-overlay"],[1,"left-container"],[1,"registrationContainer",3,"ngSubmit","formGroup"],[1,"header"],[1,"flex-container-row"],["variant","on"],["pInputText","","id","firstName","formControlName","firstName","autocomplete","off"],["for","firstName"],["severity","error","size","small","variant","simple"],["pInputText","","id","surname","formControlName","surname","autocomplete","off"],["for","surname"],["pInputText","","id","identityNumber","formControlName","identityNumber","autocomplete","off"],["for","identityNumber"],["pInputText","","type","tel","id","mobileNumber","formControlName","mobileNumber","autocomplete","off"],["for","mobileNumber"],["pInputText","","type","email","id","emailAddress","formControlName","emailAddress","autocomplete","off"],["for","emailAddress"],["pInputText","","id","physicalAddress1","formControlName","physicalAddress1","autocomplete","off"],["for","physicalAddress1"],["pInputText","","id","physicalAddress2","formControlName","physicalAddress2","autocomplete","off"],["for","physicalAddress2"],["id","provinceID","optionLabel","name","optionValue","id","formControlName","provinceID","placeholder","Select a province",3,"options"],["for","provinceID"],["pInputText","","id","postalCode","formControlName","postalCode","autocomplete","off"],["for","postalCode"],["pInputText","","id","fscA_Number","formControlName","fscA_Number","autocomplete","off"],["for","fscA_Number"],["pInputText","","type","password","id","password","formControlName","password","autocomplete","off"],["for","password"],["pInputText","","type","password","id","verifyPassword","formControlName","verifyPassword","autocomplete","off"],["for","verifyPassword"],[1,"flex-container-row","btn-mg-top"],["pButton","","type","submit","label","Register",1,"btnRegistor","btn-primary",3,"disabled"],[1,"link-to-signIn"],["routerLink","/login"],[1,"terms"],["href","#"],[1,"right-container"],[1,"feature-card","bg-container"],[1,"overlay"],[1,"image-box"],[1,"vector-image"],["alt","",1,"vector-image-icon",3,"src"],[1,"feature-text"],[1,"graph-box","bg-image"],[1,"main-text"],[1,"sub-text"],["position","bottom-left",3,"showTransitionOptions","showTransformOptions","hideTransitionOptions","hideTransformOptions"]],template:function(a,r){a&1&&(e(0,"div",0),l(1,"div",1),e(2,"div",2)(3,"form",3),_("ngSubmit",function(){return r.onSubmit()}),e(4,"h2",4),n(5,"Advisor Registration"),t(),e(6,"div",0)(7,"div",5)(8,"p-floatlabel",6),l(9,"input",7),e(10,"label",8),n(11,"First Name"),t()(),p(12,Q,2,0,"p-message",9),t(),e(13,"div",5)(14,"p-floatlabel",6),l(15,"input",10),e(16,"label",11),n(17,"Surname"),t()(),p(18,Z,2,0,"p-message",9),t()(),e(19,"div",0)(20,"div",5)(21,"p-floatlabel",6),l(22,"input",12),e(23,"label",13),n(24,"Identity Number"),t()(),p(25,ie,3,3),t(),e(26,"div",5)(27,"p-floatlabel",6),l(28,"input",14),e(29,"label",15),n(30,"Mobile Number"),t()(),p(31,ne,2,0,"p-message",9),t()(),e(32,"div",0)(33,"div",5)(34,"p-floatlabel",6),l(35,"input",16),e(36,"label",17),n(37,"Email Address"),t()(),p(38,ae,2,2),t(),e(39,"div",5)(40,"p-floatlabel",6),l(41,"input",18),e(42,"label",19),n(43,"Physical Address 1"),t()(),p(44,se,2,0,"p-message",9),t()(),e(45,"div",0)(46,"div",5)(47,"p-floatlabel",6),l(48,"input",20),e(49,"label",21),n(50,"Physical Address 2"),t()()(),e(51,"div",5)(52,"p-floatlabel",6),l(53,"p-dropdown",22),e(54,"label",23),n(55,"Province"),t()(),p(56,le,2,0,"p-message",9),t()(),e(57,"div",0)(58,"div",5)(59,"p-floatlabel",6),l(60,"input",24),e(61,"label",25),n(62,"Postal Code"),t()(),p(63,de,2,0,"p-message",9),t(),e(64,"div",5)(65,"p-floatlabel",6),l(66,"input",26),e(67,"label",27),n(68,"FSCA Number"),t()()()(),e(69,"div",5)(70,"p-floatlabel",6),l(71,"input",28),e(72,"label",29),n(73,"Create a Password"),t()(),p(74,me,2,0,"p-message",9),t(),e(75,"div",5)(76,"p-floatlabel",6),l(77,"input",30),e(78,"label",31),n(79,"Confirm your password"),t()(),p(80,pe,2,0,"p-message",9)(81,ce,2,0,"p-message",9),t(),e(82,"div",32),l(83,"button",33),t(),e(84,"div")(85,"div")(86,"p",34),n(87,"Already have an account? "),e(88,"a",35),n(89,"Login"),t()()(),e(90,"div")(91,"p",36),n(92,"By registering, you agree to our "),e(93,"a",37),n(94,"Terms of Service"),t(),n(95," and "),e(96,"a",37),n(97,"Privacy Policy"),t(),n(98,"."),t()()()()(),e(99,"div",38)(100,"div",39),l(101,"div",40)(102,"div",41),e(103,"div",42),l(104,"img",43),t(),e(105,"span",44),n(106," NEW FEATURES"),t(),l(107,"div",45),e(108,"div",46),n(109,"The easiest way to manage your portfolio."),t(),e(110,"div",47),n(111,"Join the FlightPlan community now!"),t()()()(),l(112,"p-toast",48)),a&2&&(s(3),x("formGroup",r.registrationForm),s(9),d(r.isInvalid("firstName")?12:-1),s(6),d(r.isInvalid("surname")?18:-1),s(7),d(r.isInvalid("identityNumber")?25:-1),s(6),d(r.isInvalid("mobileNumber")?31:-1),s(7),d(r.isInvalid("emailAddress")?38:-1),s(6),d(r.isInvalid("physicalAddress1")?44:-1),s(9),x("options",r.provinces),s(3),d(r.isInvalid("provinceID")?56:-1),s(7),d(r.isInvalid("postalCode")?63:-1),s(11),d(r.isInvalid("password")?74:-1),s(6),d(r.isInvalid("verifyPassword")?80:-1),s(),d(r.isPasswordMismatch()?81:-1),s(2),x("disabled",r.registrationForm.invalid),s(21),x("src",r.backgroundImagePath,h),s(8),x("showTransitionOptions","450ms")("showTransformOptions","translateX(100%)")("hideTransitionOptions","250ms")("hideTransformOptions","translateX(100%)"))},dependencies:[w,z,T,N,A,E,k,R,O,D,j,L,q,I,S,H,V,B,U,G],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:PT-Sans,sans-serif}[_ngcontent-%COMP%]:root{--primary-color: #98abbe;--secondary-color: #f0f0f0;--text-color: #333}.form-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#275368;position:relative}.Logoimage[_ngcontent-%COMP%]{position:absolute;top:30px;left:40px;width:50px;height:50px;background-size:cover;background-position:center}.registrationContainer[_ngcontent-%COMP%]{max-width:600px;background-color:#fff;display:flex;flex-direction:column;min-height:68vh;justify-content:space-evenly;height:100vh;padding-right:80px}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:25px;color:#2d4f5d;font-family:sans-serif}.flex-container-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;margin-bottom:5px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:13px;outline:none}p-dropdown[_ngcontent-%COMP%]{width:100%}.btnRegistor[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:4px;font-size:16px;cursor:pointer}.btn-mg-top[_ngcontent-%COMP%]{margin-top:10px}.link-to-signIn[_ngcontent-%COMP%], .terms[_ngcontent-%COMP%]{margin:10px 5px}*[_ngcontent-%COMP%]{padding:0;margin:0}[_ngcontent-%COMP%]:root{--background-color: #ffffff;--Placeholder-text-color: #bdbdbd;--body-text: #2d4f5d;--sign-up-text-color: #c3197d;--primary-background-color: rgb(39, 83, 104)}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);column-gap:10px;position:relative}.vector-overlay[_ngcontent-%COMP%]{position:absolute;top:20%;left:45%;width:600px;height:600px;background-image:url(/assets/images/vector.png);z-index:2;background-position:center;background-repeat:no-repeat;background-size:550px;transform:rotate(.95deg)}.left-container[_ngcontent-%COMP%], .right-container[_ngcontent-%COMP%]{height:100vh}.left-container[_ngcontent-%COMP%]{background-color:var(--background-color);display:flex;flex-direction:column;justify-content:center;align-items:end;padding:5px}.logo-conatiner[_ngcontent-%COMP%]{padding:5px;width:100%;margin-bottom:70px}.logo-conatiner[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50px;object-fit:contain;object-position:center}.form-container[_ngcontent-%COMP%]{width:100%;padding-bottom:10px;display:flex;align-items:end;flex-direction:column}.components-containers[_ngcontent-%COMP%]{width:400px;padding:5px}.login-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.auth-type-grid[_ngcontent-%COMP%]{display:flex;column-gap:10px;padding:10px 5px}.choice-type-container[_ngcontent-%COMP%]{display:flex;column-gap:5px}.radio-button[_ngcontent-%COMP%]{accent-color:#2d4f5d;border:0;scale:1.5}.label-text[_ngcontent-%COMP%]{color:#2d4f5d;font-weight:bolder;font-size:18px;font-family:sans-serif}.user-alert-container[_ngcontent-%COMP%]{padding:10px 10px 10px 0}.user-alert[_ngcontent-%COMP%]{font-size:25px;color:#2d4f5d;font-family:sans-serif;margin:10px 0}.user-prompt[_ngcontent-%COMP%]{color:#bdbdbd;font-family:sans-serif;font:15px}.input-fields[_ngcontent-%COMP%]{margin-bottom:10px}.relative-container[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:1rem;max-height:88vh;height:100%}.email-conatiner[_ngcontent-%COMP%], .password-conatiner[_ngcontent-%COMP%]{position:absolute;left:8px;top:8px;width:25px;height:25px;display:flex;justify-content:center;align-items:center}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px;width:100%;border:0;outline:none;height:40px;border-radius:20px;background-color:#f4f4f4}.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{background-color:var(--Placeholder-text-color)}.flex-container[_ngcontent-%COMP%]{position:relative}.flex-container[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;column-gap:10px}.phone-icon-container[_ngcontent-%COMP%]{width:100px;background-color:#f4f4f4;display:flex;justify-content:center;align-items:center;border-radius:20px;height:40px}.country-code-select[_ngcontent-%COMP%]{background-color:transparent;outline:none;font-size:16px;margin-left:20px;width:50px;border:none}.input-field[_ngcontent-%COMP%]{display:flex;margin-top:5px;margin-bottom:10px}.phone-input-container[_ngcontent-%COMP%]{flex:1}.phoneInputBox[_ngcontent-%COMP%]{width:100%;border:0;outline:none;height:40px;border-radius:20px;background-color:#f4f4f4;padding-left:20px}.forgot-password-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;padding:10px 0;margin-bottom:10px}.reset-password-link[_ngcontent-%COMP%]{color:#2d4f5d;font-weight:bolder;font-size:10px;text-decoration:none;font-family:sans-serif}.submitButton[_ngcontent-%COMP%]{width:100%;border-radius:20px;cursor:pointer;background-color:#2d4f5d;color:#fff;height:40px;border:none}.or-container[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin-top:40px}.or-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 10px;color:gray;font-size:14px;position:relative}.or-container[_ngcontent-%COMP%]:before, .or-container[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid grey}.or-container[_ngcontent-%COMP%]:before{margin-right:10px}.or-container[_ngcontent-%COMP%]:after{margin-left:10px}.social-login-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:25px;width:100%;height:40px}.social-login-text[_ngcontent-%COMP%]{font-family:sans-serif;color:#2d4f5d}.sign-up-link[_ngcontent-%COMP%]{color:#c3197d;margin-left:5px;text-decoration:none;font-family:sans-serif;font-weight:bolder;cursor:pointer}.right-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.feature-card[_ngcontent-%COMP%]{position:relative;background:#275368;border-radius:10px;height:88vh;width:70%;padding:20px;display:flex;flex-direction:column;justify-content:end;align-items:center;background-image:url(/assets/images/bgImage.png);background-size:cover;background-position:center;background-repeat:no-repeat}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#275368cc;display:flex;justify-content:center;align-items:center;border-radius:10px}.image-box[_ngcontent-%COMP%]{background-color:#fff;width:70%;height:35%;position:absolute;top:22%;left:15%;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#bdbdbd;font-family:PT Sans,sans-serif;font-style:italic;z-index:2}.graph-box[_ngcontent-%COMP%]{width:21%;height:20%;background-color:#fff;border-radius:20px;display:flex;justify-content:center;align-items:center;box-shadow:0 0 10px #0003;position:absolute;top:47%;left:8%;color:#bdbdbd;font-family:PT Sans,sans-serif;font-style:italic;z-index:2}.main-text[_ngcontent-%COMP%]{color:#fff;font-family:"PT Serif",sans-serif;font-size:25px;padding:0 70px;text-align:center;margin-bottom:55px;font-weight:lighter;line-height:30px;z-index:1;position:absolute;bottom:48px}.sub-text[_ngcontent-%COMP%]{color:#fff;font-family:arial;margin-bottom:20px;font-size:14px;z-index:1;position:absolute;bottom:50px}.feature-text[_ngcontent-%COMP%]{position:absolute;right:-12px;top:38%;color:#fff;transform:rotate(270deg);font-size:10px;font-family:PT Sans,sans-serif;padding:0;margin:0}.vector-image[_ngcontent-%COMP%]{position:absolute;top:18%;right:10%;border-radius:50%;display:flex;justify-content:center;align-items:center;padding:10px;z-index:2}.vector-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;object-position:center}@media (max-width: 768px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.left-container[_ngcontent-%COMP%], .right-container[_ngcontent-%COMP%]{height:auto}.login-form-wrapper[_ngcontent-%COMP%]{width:90%}.feature-card[_ngcontent-%COMP%]{width:90%;height:auto;padding:10px}.image-box[_ngcontent-%COMP%], .graph-box[_ngcontent-%COMP%]{width:80%;height:auto;position:relative;top:auto;left:auto}}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:25px;color:#2d4f5d;font-family:sans-serif}.image-box[_ngcontent-%COMP%]{background-image:url(/assets/images/AdvisorsImage.webp);background-position:center;background-repeat:no-repeat;background-size:cover;border-radius:1rem}.graph-box[_ngcontent-%COMP%]{width:21%;height:20%;background-color:#fff;border-radius:1.25rem;display:flex;justify-content:center;align-items:center;box-shadow:0 0 .625rem #0003;position:absolute;top:47%;left:8%;color:#bdbdbd;font-family:PT Sans,sans-serif;font-style:italic;z-index:2;background-image:url(/assets/images/performance.jpg);background-size:cover;background-position:center}@media (max-width: 1024px){.graph-box[_ngcontent-%COMP%]{width:35%;height:25%;top:50%;left:5%}}@media (max-width: 768px){.graph-box[_ngcontent-%COMP%]{width:50%;height:30%;top:55%;left:4%}}@media (max-width: 480px){.graph-box[_ngcontent-%COMP%]{width:80%;height:35%;top:60%;left:2%;font-size:.875rem}}']})};export{K as RegistrationformComponent,ge as passwordMatchValidator};
